{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useState } from 'react'\nimport PropTypes from 'prop-types';\n\nconst getNavStyles = (indx, length) => {\n  let styles = []\n  for (let i = 0; i < length; i++) {\n    if (i < indx) {\n      styles.push('done')\n    } else if (i === indx) {\n      styles.push('doing')\n    } else {\n      styles.push('todo')\n    }\n  }\n  return styles\n}\n\nconst getButtonsState = (indx, length) => {\n  if (indx > 0 && indx < length - 1) {\n    return {\n      showPreviousBtn: true,\n      showNextBtn: true\n    }\n  } else if (indx === 0) {\n    return {\n      showPreviousBtn: false,\n      showNextBtn: true\n    }\n  } else {\n    return {\n      showPreviousBtn: true,\n      showNextBtn: false\n    }\n  }\n}\n\nfunction MultiStep({ steps, allowCrumbClick, currStep, showNavigation }) {\n  let currentIndex;\n  if(currStep === '___firstKey') {\n    currentIndex = 0;\n  } else {\n    currentIndex = steps.findIndex(x => x.name === currStep);\n  }\n\n  const [stylesState, setStyles] = useState(getNavStyles(currentIndex, steps.length))\n  const [compState, setComp] = useState(0)\n  const [buttonsState, setButtons] = useState(getButtonsState(currentIndex, steps.length))\n\n  function setStepState(indx) {\n    setStyles(getNavStyles(indx, steps.length))\n    setComp(indx < steps.length? indx : compState)\n    setButtons(getButtonsState(indx, steps.length))\n  }\n\n  const next = () => setStepState(compState + 1)\n\n  const previous = () => setStepState((compState > 0) ? compState - 1 : compState)\n\n  const handleKeyDown = (evt) => evt.which === 13 ? next(steps.length) : {}\n\n  const handleOnClick = (evt) => {\n    if(!allowCrumbClick) return null;\n    if (evt.currentTarget.value === steps.length - 1 && compState === steps.length - 1) {\n      setStepState(steps.length)\n    } else {\n      setStepState(evt.currentTarget.value)\n    }\n  }\n\n  const renderSteps = () =>\n    steps.map((s, i) => (\n      <li\n        className={'progtrckr-' + stylesState[i]}\n        onClick={handleOnClick}\n        key={i}\n        value={i}\n      >\n        <em>{i + 1}</em>\n        <span>{steps[i].name}</span>\n      </li>\n    ))\n\n  return (\n      <div className='container' onKeyDown={handleKeyDown}>\n        <ol className='progtrckr'>\n          {renderSteps()}\n        </ol>\n        {steps[compState].component}\n        <div style={showNavigation ? {} : { display: 'none' }}>\n          <button\n            style={buttonsState.showPreviousBtn ? {} : { display: 'none' }}\n            onClick={previous}\n          >\n            Previous\n          </button>\n\n          <button\n            style={buttonsState.showNextBtn ? {} : { display: 'none' }}\n            onClick={next}\n          >\n            Next\n          </button>\n        </div>\n      </div>\n  )\n}\n\nMultiStep.propTypes = {\n  showNavigation: PropTypes.bool,\n  allowCrumbClick: PropTypes.bool,\n  currStep: PropTypes.string,\n  steps: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    component: PropTypes.node\n  })).isRequired\n};\n\nMultiStep.defaultProps = {\n  showNavigation: true,\n  allowCrumbClick: true,\n  currStep: '___firstKey',\n}\n\nexport default MultiStep;\n"],"names":["getNavStyles","indx","length","styles","i","push","getButtonsState","showPreviousBtn","showNextBtn","MultiStep","steps","allowCrumbClick","currStep","showNavigation","currentIndex","findIndex","x","name","useState","stylesState","setStyles","compState","setComp","buttonsState","setButtons","setStepState","next","previous","handleKeyDown","evt","which","handleOnClick","currentTarget","value","renderSteps","map","s","component","display","propTypes","PropTypes","bool","string","arrayOf","shape","node","isRequired","defaultProps"],"mappings":"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"}